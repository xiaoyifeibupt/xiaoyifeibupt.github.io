---
layout: post
title: UNIX基础知识、标准化及实现
categories: [APUE]
---


操作系统：内核+其他软件（系统实用程序、应用软件、shell、公用函数库）

-	内核(kernel)
-	系统调用(system call)
-	库函数(library)
-	shell
-	应用程序(application)

####登录

口令文件`/etc/password`查看登录名

登录项（7个以冒号分隔的字段）：登录名、加密口令（205）、用户数值ID（105）、注释字段、起始目录、shell程序

-	username
-	password
-	uid(user id)
-	gid(group id)
-	comment
-	home directory
-	shell
	
####文件目录

文件系统：根目录（/） `stat`和`fstat`函数返回所有包含文件属性的一个信息结构

文件名：创建目录时自动创建两个文件名（.当前目录和..父目录），根目录中相同

路径名：相对路径、绝对路径。文件系统根的名字（/）是一个特殊的绝对路径，不含文件名

工作目录：相对路径从当前工作目录开始解释。进程可以利用chdir函数更改工作目录

起始目录：口令文件中取得

文件属性包括文件类型，文件大小，文件所有者，文件权限，文件最后修改时间等。使用`stat`,`fstat`或者是`lstat`函数可以返回某个文件的属性信息。

####输入输出

文件描述符

标准输入、标准输出、标准出错

不用缓冲的I/O：函数`open`、`read`、`write`、`lseek`、`close`提供不带缓冲的I/O，使用文件描述符

标准I/O：提供一种对不用缓冲I/O函数带缓冲的接口，无须担心缓冲区大小。标准输入输出常量`stdin`和`stdout`定义在头文件`<stdio.h>`中，分别表示标准输入和标准输出文件

####程序和进程

程序：可执行文件，由六个`exec`函数中的一个将程序从内核读入存储器并执行

进程和进程ID：数字标示符

进程控制：`fork`，`exec`，`waitpid`

线程和线程ID：同一进程内的所有线程共享同一地址空间、文件描述符、栈以及与进程相关的属性。线程ID只在所属进程内起作用

####出错处理

UNIX函数出错时，常常返回一个赋值，整型的变量`errno`通常被设置为含有附加信息的一个值

文件`<errno.h>`定义了符号`errno`以及可以赋予它的各个常量，以字符E开头

多线程情况下，每个线程有属于它的局部`errno`

两条原则：1.如果没有出错，其值不会被一个例程清除。2.任何一个函数不会将`errno`设置为0，`<errno.h>`中所有常量不为0

出错恢复：致命性和非致命性

####用户标识

用户ID 组ID 附加组ID

对于uid来说是系统为了简化区别用户的方式(不然使用字符串区别非常麻烦).uid在登录时候确定 并且不能够修改。uid=0的用户为根用户(root),这是一个超级用户对于系统都一切支配权。同理也是 gid和sgid存在的理由。gid就好比用户所属部门的一个编号，而sgid引入原因是有时候希望这个用户 属于多个其他部门，这些其他部门的gid就是sgid.

####信号

通知进程发生某种情况的一种技术：忽略该信号、按照系统默认方式处理、提供一个函数，信号发生时调用

在终端下面有两种产生信号的方式，分别是中断键(interrupt key,C-c)和退出键(quit key,C-\). 另外我们可以调用kill函数或者是在shell下面使用kill命令来给进程发送信号。

####时间值

日历时间 `time_t`

进程时间 `clock_t`

度量一个程序的执行时间：时钟时间，用户CPU时间，系统CPU时间。用户CPU时间是指执行用户指令所用的时间，系统CPU时间是该进程执行内核程序所经历的时间。

-	时钟时间(wall clock time).
-	用户CPU时间(user cpu time).
-	系统CPU时间(sys cpu time).

